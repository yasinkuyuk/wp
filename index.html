<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Chat Analizi - YK7 & Ceydoşkuş</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header p {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }
        
        .stat-card .number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .stat-card .label {
            color: #7f8c8d;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 1px;
        }
        
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .chart-container h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.3rem;
        }
        
        .chart-wrapper {
            position: relative;
            height: 350px;
        }
        
        .top-days-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .top-days-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .day-item {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .day-item .date {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .day-item .count {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .footer {
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            color: #7f8c8d;
        }
        
        /* Tooltip stilleri */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }
        
        .info-icon {
            display: inline-block;
            width: 16px;
            height: 16px;
            margin-left: 8px;
            background: #667eea;
            border-radius: 50%;
            color: white;
            font-size: 12px;
            line-height: 16px;
            text-align: center;
            font-weight: bold;
            vertical-align: middle;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 250px;
            background-color: #2c3e50;
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            line-height: 1.4;
        }
        
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #2c3e50 transparent transparent transparent;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        /* Tab stilleri */
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .tab {
            flex: 1;
            padding: 12px 20px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            color: #7f8c8d;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .word-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }
        
        .word-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 12px;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 3px solid #667eea;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .word-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }
        
        .word-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #2c3e50;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            z-index: 1000;
        }
        
        .word-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: #2c3e50;
        }
        
        .word-item:hover .word-tooltip {
            opacity: 1;
        }
        
        .nickname-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .nickname-item {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .nickname-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }
        
        .nickname-item .word {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .nickname-item .count {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .nickname-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #2c3e50;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            z-index: 1000;
            margin-bottom: 5px;
        }
        
        .nickname-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: #2c3e50;
        }
        
        .nickname-item:hover .nickname-tooltip {
            opacity: 1;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header {
                padding: 20px 15px;
                margin-bottom: 20px;
            }
            
            .header h1 {
                font-size: 1.8rem;
                margin-bottom: 8px;
            }
            
            .header p {
                font-size: 1rem;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
                margin-bottom: 20px;
            }
            
            .stat-card {
                padding: 15px 10px;
            }
            
            .stat-card .number {
                font-size: 1.8rem;
                margin-bottom: 3px;
            }
            
            .stat-card .label {
                font-size: 0.8rem;
            }
            
            .chart-grid {
                grid-template-columns: 1fr;
                gap: 20px;
                margin-bottom: 20px;
            }
            
            .chart-container {
                padding: 20px 15px;
            }
            
            .chart-container h3 {
                font-size: 1.1rem;
                margin-bottom: 15px;
            }
            
            .chart-wrapper {
                height: 280px;
            }
            
            .top-days-container {
                padding: 20px 15px;
                margin-bottom: 15px;
            }
            
            .top-days-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                margin-top: 15px;
            }
            
            .day-item {
                padding: 12px;
            }
            
            .day-item .date {
                font-size: 1rem;
            }
            
            .day-item .count {
                font-size: 0.85rem;
            }
            
            .word-list {
                grid-template-columns: 1fr;
                gap: 8px;
            }
            
            .word-item {
                padding: 10px 12px;
                font-size: 0.95rem;
            }
            
            .nickname-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            
            .nickname-item {
                padding: 12px;
            }
            
            .nickname-item .word {
                font-size: 1rem;
            }
            
            .tooltip .tooltiptext {
                width: 200px;
                margin-left: -100px;
                font-size: 0.8rem;
            }
            
            .word-tooltip {
                font-size: 0.75rem;
                padding: 6px 10px;
            }
        }
        
        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .top-days-grid, .nickname-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.6rem;
            }
            
            .stat-card .number {
                font-size: 1.6rem;
            }
            
            .chart-wrapper {
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>💬 WhatsApp Chat Analizi</h1>
            <p>YK7 & Ceydoşkuş'un Mesajlaşma İstatistikleri</p>
            <p id="chat-period"></p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="number" id="total-messages">-</div>
                <div class="label tooltip">Toplam Mesaj
                    <span class="info-icon">i</span>
                    <span class="tooltiptext">Aramızdaki toplamda attığımız mesaj sayısı</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="number" id="messages-per-day">-</div>
                <div class="label tooltip">Günlük Ortalama
                    <span class="info-icon">i</span>
                    <span class="tooltiptext">Günde ortalama kaç mesaj attığımız</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="number" id="response-time">-</div>
                <div class="label tooltip">Ort. Cevap Süresi (sn)
                    <span class="info-icon">i</span>
                    <span class="tooltiptext">Birbirimize ne kadar hızlı cevap verdiğimizin ortalaması (saniye cinsinden)</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="number" id="consecutive-messages">-</div>
                <div class="label tooltip">Ort. Ardışık Mesaj
                    <span class="info-icon">i</span>
                    <span class="tooltiptext">Diğeri araya girmeden üst üste kaç mesaj attığımızın ortalaması</span>
                </div>
            </div>
        </div>

        <div class="chart-grid">
            <div class="chart-container">
                <h3 class="tooltip">📊 Mesaj Dağılımı
                    <span class="info-icon">i</span>
                    <span class="tooltiptext">Hangimizin ne kadar mesaj attığının yüzdelik dağılımı</span>
                </h3>
                <div class="chart-wrapper">
                    <canvas id="messageDistChart"></canvas>
                </div>
            </div>
            
            <div class="chart-container">
                <h3 class="tooltip">📅 Haftanın Günlerine Göre
                    <span class="info-icon">i</span>
                    <span class="tooltiptext">Hangi günlerde daha çok mesajlaştığımız (tüm dönem boyunca)</span>
                </h3>
                <div class="chart-wrapper">
                    <canvas id="weeklyChart"></canvas>
                </div>
            </div>
            
            <div class="chart-container">
                <h3 class="tooltip">⏰ Ardışık Mesaj Ortalaması
                    <span class="info-icon">i</span>
                    <span class="tooltiptext">Her birimizin üst üste mesaj atma eğilimi</span>
                </h3>
                <div class="chart-wrapper">
                    <canvas id="consecutiveChart"></canvas>
                </div>
            </div>
            
            <div class="chart-container">
                <h3 class="tooltip">⚡ Kişi Bazlı Cevap Süresi
                    <span class="info-icon">i</span>
                    <span class="tooltiptext">Hangimizin daha hızlı cevap verdiği (saniye cinsinden)</span>
                </h3>
                <div class="chart-wrapper">
                    <canvas id="responseChart"></canvas>
                </div>
            </div>
            
            <div class="chart-container">
                <h3 class="tooltip">🕐 Saatlik Mesaj Dağılımı
                    <span class="info-icon">i</span>
                    <span class="tooltiptext">Günün hangi saatlerinde daha çok mesajlaştığımız (00:00-01:00 formatında)</span>
                </h3>
                <div class="chart-wrapper">
                    <canvas id="hourlyChart"></canvas>
                </div>
            </div>
        </div>

        <div class="top-days-container">
            <h3 class="tooltip">🏆 En Çok Konuştuğumuz 10 Gün
                <span class="info-icon">i</span>
                <span class="tooltiptext">Şu zamana kadar en çok mesajlaştığımız günler ve o günlerdeki toplam mesaj sayıları</span>
            </h3>
            <div class="top-days-grid" id="top-days"></div>
        </div>

        <div class="chart-container">
            <h3 class="tooltip">📝 En Çok Kullandığımız 20 Kelime
                <span class="info-icon">i</span>
                <span class="tooltiptext">Hangi kelimeleri en sık kullandığımız - üzerine gelince kişi bazlı dağılımı görürsünüz</span>
            </h3>
            <div class="word-list" id="words-list"></div>
        </div>

        <div class="top-days-container">
            <h3 class="tooltip">💕 Sevgi Sözcükleri
                <span class="info-icon">i</span>
                <span class="tooltiptext">Birbirimize ne sıklıkla "aşkım", "bebeğim" gibi sevgi sözcükleri kullandığımız - üzerine gelince kişi bazlı dağılımı görürsünüz</span>
            </h3>
            <div class="nickname-grid" id="nicknames"></div>
        </div>


    </div>

    <script>
        // Embedded JSON data
        const data = {
  "totalMessages": 161609,
  "totalDays": 335,
  "messagesPerDay": 482.41492537313434,
  "messageBySender": {
    "yk7": 74222,
    "ceyda! 🧿": 87387
  },
  "responseTime": {
    "overall": {
      "average": 207.83644841030588,
      "median": 8,
      "totalResponses": 74637
    },
    "bySender": {
      "ceyda! 🧿": {
        "average": 225.7180196301719,
        "median": 8,
        "totalResponses": 36882
      },
      "yk7": {
        "average": 190.36834856310423,
        "median": 8,
        "totalResponses": 37755
      }
    }
  },
  "consecutiveMessages": {
    "overall": 2.0694693438508427,
    "bySender": {
      "yk7": 1.9008861343031296,
      "ceyda! 🧿": 2.2380525533985556
    }
  },
  "weeklyDistribution": {
    "Pazar": 22759,
    "Pazartesi": 22786,
    "Salı": 22865,
    "Cuma": 25974,
    "Perşembe": 25157,
    "Cumartesi": 20538,
    "Çarşamba": 21530
  },
  "hourlyDistribution": {
    "0": 25626,
    "1": 22155,
    "2": 11702,
    "3": 3547,
    "4": 571,
    "5": 31,
    "6": 62,
    "7": 111,
    "8": 303,
    "9": 679,
    "10": 1463,
    "11": 2705,
    "12": 4508,
    "13": 6139,
    "14": 7243,
    "15": 8090,
    "16": 8576,
    "17": 8894,
    "18": 9506,
    "19": 10953,
    "20": 13080,
    "21": 14851,
    "22": 16139,
    "23": 25339
  },
  "topMessagingDays": [
    {
      "date": "5.04.2025",
      "count": 2587
    },
    {
      "date": "6.04.2025",
      "count": 1758
    },
    {
      "date": "10.09.2025",
      "count": 1633
    },
    {
      "date": "3.01.2025",
      "count": 1620
    },
    {
      "date": "12.08.2025",
      "count": 1514
    },
    {
      "date": "15.09.2025",
      "count": 1504
    },
    {
      "date": "4.04.2025",
      "count": 1376
    },
    {
      "date": "25.07.2025",
      "count": 1369
    },
    {
      "date": "1.08.2025",
      "count": 1361
    },
    {
      "date": "28.08.2025",
      "count": 1320
    }
  ],
  "leastMessagingDays": [
    {
      "date": "17.02.2025",
      "count": 1
    },
    {
      "date": "20.10.2024",
      "count": 2
    },
    {
      "date": "26.03.2025",
      "count": 2
    },
    {
      "date": "5.02.2025",
      "count": 6
    },
    {
      "date": "28.10.2024",
      "count": 10
    },
    {
      "date": "25.10.2024",
      "count": 13
    },
    {
      "date": "5.11.2024",
      "count": 17
    },
    {
      "date": "2.11.2024",
      "count": 28
    },
    {
      "date": "4.11.2024",
      "count": 32
    },
    {
      "date": "21.10.2024",
      "count": 39
    }
  ],
  "mostUsedWords": {
    "overall": [
      {
        "word": "aşkım",
        "count": 24784
      },
      {
        "word": "çok",
        "count": 11134
      },
      {
        "word": "ben",
        "count": 9174
      },
      {
        "word": "ceyda",
        "count": 7373
      },
      {
        "word": "bir",
        "count": 4213
      },
      {
        "word": "evet",
        "count": 4121
      },
      {
        "word": "ama",
        "count": 3901
      },
      {
        "word": "seni",
        "count": 3567
      },
      {
        "word": "sen",
        "count": 3295
      },
      {
        "word": "yok",
        "count": 3100
      },
      {
        "word": "iyi",
        "count": 3066
      },
      {
        "word": "falan",
        "count": 3000
      },
      {
        "word": "için",
        "count": 2966
      },
      {
        "word": "var",
        "count": 2889
      },
      {
        "word": "daha",
        "count": 2723
      },
      {
        "word": "benim",
        "count": 2667
      },
      {
        "word": "gibi",
        "count": 2643
      },
      {
        "word": "şey",
        "count": 2508
      },
      {
        "word": "diye",
        "count": 2487
      },
      {
        "word": "sevgilim",
        "count": 2310
      }
    ],
    "bySender": {
      "yk7": [
        {
          "word": "aşkım",
          "count": 10597
        },
        {
          "word": "çok",
          "count": 4495
        },
        {
          "word": "ceyda",
          "count": 4046
        },
        {
          "word": "ben",
          "count": 3898
        },
        {
          "word": "bir",
          "count": 2974
        },
        {
          "word": "bebeğim",
          "count": 1829
        },
        {
          "word": "yok",
          "count": 1772
        },
        {
          "word": "evet",
          "count": 1757
        },
        {
          "word": "iyi",
          "count": 1633
        },
        {
          "word": "var",
          "count": 1563
        },
        {
          "word": "sen",
          "count": 1513
        },
        {
          "word": "seni",
          "count": 1513
        },
        {
          "word": "falan",
          "count": 1508
        },
        {
          "word": "ama",
          "count": 1499
        },
        {
          "word": "gibi",
          "count": 1393
        },
        {
          "word": "yani",
          "count": 1313
        },
        {
          "word": "daha",
          "count": 1309
        },
        {
          "word": "şey",
          "count": 1304
        },
        {
          "word": "için",
          "count": 1299
        },
        {
          "word": "sevgilim",
          "count": 1260
        }
      ],
      "ceyda! 🧿": [
        {
          "word": "aşkım",
          "count": 14187
        },
        {
          "word": "çok",
          "count": 6639
        },
        {
          "word": "ben",
          "count": 5276
        },
        {
          "word": "ceyda",
          "count": 3327
        },
        {
          "word": "ama",
          "count": 2402
        },
        {
          "word": "evet",
          "count": 2364
        },
        {
          "word": "seni",
          "count": 2054
        },
        {
          "word": "sen",
          "count": 1782
        },
        {
          "word": "için",
          "count": 1667
        },
        {
          "word": "falan",
          "count": 1492
        },
        {
          "word": "benim",
          "count": 1476
        },
        {
          "word": "diye",
          "count": 1466
        },
        {
          "word": "iyi",
          "count": 1433
        },
        {
          "word": "daha",
          "count": 1414
        },
        {
          "word": "yok",
          "count": 1328
        },
        {
          "word": "var",
          "count": 1326
        },
        {
          "word": "sana",
          "count": 1252
        },
        {
          "word": "gibi",
          "count": 1250
        },
        {
          "word": "bir",
          "count": 1239
        },
        {
          "word": "şey",
          "count": 1204
        }
      ]
    }
  },
  "nicknameUsage": [
    {
      "nickname": "aşkım",
      "count": 25412,
      "bySender": {
        "yk7": 10753,
        "ceyda! 🧿": 14659
      }
    },
    {
      "nickname": "sevgilim",
      "count": 3009,
      "bySender": {
        "yk7": 1514,
        "ceyda! 🧿": 1495
      }
    },
    {
      "nickname": "bebeğim",
      "count": 2105,
      "bySender": {
        "yk7": 2087,
        "ceyda! 🧿": 18
      }
    },
    {
      "nickname": "bitanem",
      "count": 1800,
      "bySender": {
        "yk7": 766,
        "ceyda! 🧿": 1034
      }
    },
    {
      "nickname": "hayatım",
      "count": 428,
      "bySender": {
        "yk7": 171,
        "ceyda! 🧿": 257
      }
    },
    {
      "nickname": "beneğim",
      "count": 102,
      "bySender": {
        "yk7": 102,
        "ceyda! 🧿": 0
      }
    }
  ],
  "chatPeriod": {
    "start": "20.10.2024",
    "end": "20.09.2025"
  }
};

        // Sayıları formatla
        function formatNumber(num, decimals = 0) {
            if (decimals > 0) {
                return new Intl.NumberFormat('tr-TR', {
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 2
                }).format(num);
            }
            // Türkçe format 74.222 şeklinde nokta ile ayırır
            return new Intl.NumberFormat('tr-TR').format(Math.round(num));
        }
        
        // Kelime için kişi bazlı tooltip metni oluştur
        function getWordTooltip(word) {
            const yk7Count = data.mostUsedWords.bySender.yk7.find(w => w.word === word)?.count || 0;
            const ceydaCount = data.mostUsedWords.bySender['ceyda! 🧿'].find(w => w.word === word)?.count || 0;
            return `YK7: ${formatNumber(yk7Count)} | Ceydoşkuş: ${formatNumber(ceydaCount)}`;
        }
        
        // Sevgi sözcükleri için kişi bazlı tooltip metni oluştur
        function getNicknameTooltip(nickname) {
            const yk7Count = nickname.bySender.yk7 || 0;
            const ceydaCount = nickname.bySender['ceyda! 🧿'] || 0;
            return `YK7: ${formatNumber(yk7Count)} | Ceydoşkuş: ${formatNumber(ceydaCount)}`;
        }

        // Ana fonksiyon
        function initDashboard() {
            // Temel istatistikleri güncelle
            document.getElementById('total-messages').textContent = formatNumber(data.totalMessages);
            document.getElementById('messages-per-day').textContent = formatNumber(data.messagesPerDay, 2);
            document.getElementById('response-time').textContent = formatNumber(data.responseTime.overall.average, 2);
            document.getElementById('consecutive-messages').textContent = formatNumber(data.consecutiveMessages.overall, 2);
            document.getElementById('chat-period').textContent = `${data.chatPeriod.start} - ${data.chatPeriod.end}`;
            
            // Mesaj dağılımı grafiği
            const messageCtx = document.getElementById('messageDistChart').getContext('2d');
            new Chart(messageCtx, {
                type: 'doughnut',
                data: {
                    labels: ['YK7', 'Ceydoşkuş'],
                    datasets: [{
                        data: [data.messageBySender.yk7, data.messageBySender['ceyda! 🧿']],
                        backgroundColor: ['#667eea', '#764ba2'],
                        borderWidth: 0,
                        hoverOffset: 15
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: { size: 14 }
                            }
                        }
                    }
                }
            });
            
            // Haftalık dağılım grafiği
            const weeklyCtx = document.getElementById('weeklyChart').getContext('2d');
            const daysOrder = ['Pazartesi', 'Salı', 'Çarşamba', 'Perşembe', 'Cuma', 'Cumartesi', 'Pazar'];
            const weeklyData = daysOrder.map(day => data.weeklyDistribution[day]);
            
            new Chart(weeklyCtx, {
                type: 'bar',
                data: {
                    labels: daysOrder,
                    datasets: [{
                        label: 'Mesaj Sayısı',
                        data: weeklyData,
                        backgroundColor: 'rgba(102, 126, 234, 0.8)',
                        borderColor: '#667eea',
                        borderWidth: 2,
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });
            
            // Ardışık mesaj grafiği
            const consecutiveCtx = document.getElementById('consecutiveChart').getContext('2d');
            new Chart(consecutiveCtx, {
                type: 'bar',
                data: {
                    labels: ['YK7', 'Ceydoşkuş'],
                    datasets: [{
                        label: 'Ortalama Ardışık Mesaj',
                        data: [data.consecutiveMessages.bySender.yk7, data.consecutiveMessages.bySender['ceyda! 🧿']],
                        backgroundColor: ['#667eea', '#764ba2'],
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });
            
            // Cevap süresi grafiği (kişi bazlı)
            const responseCtx = document.getElementById('responseChart').getContext('2d');
            new Chart(responseCtx, {
                type: 'bar',
                data: {
                    labels: ['YK7', 'Ceydoşkuş'],
                    datasets: [{
                        label: 'Ortalama Cevap Süresi (saniye)',
                        data: [
                            data.responseTime.bySender.yk7.average, 
                            data.responseTime.bySender['ceyda! 🧿'].average
                        ],
                        backgroundColor: ['#667eea', '#764ba2'],
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });
            
            // Saatlik dağılım grafiği
            const hourlyCtx = document.getElementById('hourlyChart').getContext('2d');
            const hours = Array.from({length: 24}, (_, i) => i);
            const hourlyData = hours.map(hour => data.hourlyDistribution[hour.toString()] || 0);
            const hourLabels = hours.map(hour => {
                const startHour = hour.toString().padStart(2, '0');
                const endHour = ((hour + 1) % 24).toString().padStart(2, '0');
                return `${startHour}:00-${endHour}:00`;
            });
            
            new Chart(hourlyCtx, {
                type: 'bar',
                data: {
                    labels: hourLabels,
                    datasets: [{
                        label: 'Mesaj Sayısı',
                        data: hourlyData,
                        backgroundColor: 'rgba(102, 126, 234, 0.8)',
                        borderColor: '#667eea',
                        borderWidth: 2,
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        },
                        x: {
                            grid: { display: false },
                            ticks: {
                                maxRotation: 45,
                                minRotation: 45,
                                font: { size: 10 }
                            }
                        }
                    }
                }
            });
            
            // En çok konuşulan günler
            const topDaysContainer = document.getElementById('top-days');
            data.topMessagingDays.forEach((day, index) => {
                const dayElement = document.createElement('div');
                dayElement.className = 'day-item';
                dayElement.innerHTML = `
                    <div class="date">#${index + 1} - ${day.date}</div>
                    <div class="count">${formatNumber(day.count)} mesaj</div>
                `;
                topDaysContainer.appendChild(dayElement);
            });
            
            
            // En çok kullanılan kelimeler - sadece toplam ile kişi bazlı tooltip
            const wordsContainer = document.getElementById('words-list');
            wordsContainer.innerHTML = '';
            data.mostUsedWords.overall.forEach(word => {
                const wordElement = document.createElement('div');
                wordElement.className = 'word-item';
                const tooltipText = getWordTooltip(word.word);
                
                wordElement.innerHTML = `
                    <span>${word.word}</span>
                    <span>${formatNumber(word.count)}</span>
                    <div class="word-tooltip">${tooltipText}</div>
                `;
                wordsContainer.appendChild(wordElement);
            });
            
            // Sevgi sözcükleri
            const nicknamesContainer = document.getElementById('nicknames');
            data.nicknameUsage.forEach(nickname => {
                const nicknameElement = document.createElement('div');
                nicknameElement.className = 'nickname-item';
                const tooltipText = getNicknameTooltip(nickname);
                
                nicknameElement.innerHTML = `
                    <div class="word">${nickname.nickname}</div>
                    <div class="count">${formatNumber(nickname.count)} kez</div>
                    <div class="nickname-tooltip">${tooltipText}</div>
                `;
                nicknamesContainer.appendChild(nicknameElement);
            });
        }

        // Sayfa yüklendiğinde başlat
        document.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>
